# 技术栈选型说明报告
版本：v1.0

## 1. 总体架构：Client-Server (C/S)
本系统采用轻量级 C/S 架构，后端作为本地服务运行，前端作为可视化交互界面。

---

## 2. 后端技术栈

### **Runtime: Bun**
*   **选型依据**:
    1.  **性能极致**: Bun 的启动速度和运行效率显著优于 Node.js，特别适合 CLI 工具和本地微服务。
    2.  **All-in-One**: 内置了包管理器、打包工具、测试运行器和 SQLite 驱动，减少了工具链的复杂性。
    3.  **原生 TypeScript**: 无需配置复杂的 transpile 步骤，直接运行 TS 代码，开发体验极佳。

### **Web Framework: ElysiaJS**
*   **选型依据**:
    1.  **为 Bun 而生**: 充分利用 Bun 的性能优势，是目前 Bun 生态中最快、最成熟的 Web 框架之一。
    2.  **类型安全**: 提供端到端的类型推导（Type Safety），减少运行时错误。
    3.  **简洁易用**: API 设计现代且简洁，非常适合构建轻量级 API 服务。

### **核心解析引擎: Tree-sitter**
*   **选型依据**:
    1.  **通用性强**: 支持 Java, Python, TypeScript, Go 等几乎所有主流语言，无需为每种语言单独寻找解析器。
    2.  **容错性**: 即使代码有语法错误（常见于开发过程中），它也能生成可用的 AST（抽象语法树），这对于分析 "WIP" (Work In Progress) 代码至关重要。
    3.  **高性能**: 基于 C 编写，解析速度极快，且支持增量解析。

### **版本控制集成: Simple-git**
*   **选型依据**:
    1.  **API 完整**: 提供了对 Git 命令的完整封装，能够轻松读取 Commit 历史、Diff 信息和文件变更。
    2.  **轻量稳定**: 社区广泛使用，成熟度高。

---

## 3. 前端技术栈

### **Frontend Framework: React 18 + Vite**
*   **选型依据**:
    1.  **生态繁荣**: 拥有最丰富的可视化库和 UI 组件库资源。
    2.  **Vite**: 构建速度极快，配合 Bun 的后端，提供全链路的高速开发体验。

### **可视化引擎: React Flow (或 XYFlow)**
*   **选型依据**:
    1.  **流程图专家**: 专为基于节点的图（Node-based Graph）设计，非常适合展示架构图、依赖图和调用链。
    2.  **交互性强**:  内置缩放、平移、拖拽等交互功能，无需从零开发。
    3.  **高度可定制**: 允许自定义节点样式，能够轻松实现“高亮”、“折叠”等高级可视化需求。

### **状态管理: Zustand**
*   **选型依据**:
    1.  **极简主义**: 相比 Redux 更加轻量，API 简单直观，不仅减少了样板代码，性能也非常出色。
    2.  **非侵入式**: 能够很好地处理复杂的前端状态（如选中节点、过滤器状态等）。

---

## 4. 数据存储

### **图数据库: Graphology (内存) + SQLite (持久化)**
*   **选型依据**:
    1.  **Graphology**: 纯 JS 实现的图结构库，适合在内存中进行快速的图算法计算（如查找循环依赖、计算最短路径）。对于本地项目规模，内存操作通常足够且最快。
    2.  **SQLite (Bun原生支持)**: 
        *   无需额外部署数据库服务（Zero Config），是一个文件。
        *   Bun 内置了高性能 SQLite 驱动。
        *   非常适合存储历史分析记录、配置信息和缓存数据。

---

## 5. 总结
这套技术栈的核心理念是 **"Performance & Developer Experience"**。
*   利用 **Bun** 和 **Elysia** 保证了后端服务的高效和开发便捷。
*   利用 **Tree-sitter** 保证了代码分析的准确性和广度。
*   利用 **React** 和 **React Flow** 保证了前端界面的交互体验和表现力。
这是一套非常适合构建本地高性能开发工具的现代化组合。
